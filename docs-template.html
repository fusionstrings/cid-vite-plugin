<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CID Vite Plugin - Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #3B82F6;
            --primary-dark: #2563EB;
            --secondary: #8B5CF6;
            --text: #1F2937;
            --text-light: #6B7280;
            --bg: #FFFFFF;
            --bg-alt: #F9FAFB;
            --border: #E5E7EB;
            --code-bg: #1F2937;
            --code-text: #F9FAFB;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .nav {
            background: var(--bg-alt);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .section {
            margin-bottom: 4rem;
        }

        .section h2 {
            font-size: 2rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            color: var(--text);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 0.5rem;
        }

        .section h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 2rem 0 1rem;
            color: var(--text);
        }

        .section p {
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .code-block {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .inline-code {
            background: var(--bg-alt);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            font-size: 0.9em;
            color: var(--primary);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .feature-card {
            padding: 2rem;
            background: var(--bg-alt);
            border-radius: 12px;
            border: 2px solid var(--border);
            transition: transform 0.2s, border-color 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
        }

        .feature-card .icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.25rem;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--primary);
            color: white;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .api-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .api-link:hover {
            background: var(--primary-dark);
        }

        .footer {
            background: var(--bg-alt);
            border-top: 1px solid var(--border);
            padding: 2rem;
            text-align: center;
            color: var(--text-light);
        }

        .footer a {
            color: var(--primary);
            text-decoration: none;
        }

        ul {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin: 0.5rem 0;
            color: var(--text-light);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .nav-links {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>CID Vite Plugin</h1>
        <p class="subtitle">Content-Addressed Builds for the Decentralized Web</p>
    </div>

    <nav class="nav">
        <ul class="nav-links">
            <li><a href="#overview">Overview</a></li>
            <li><a href="#installation">Installation</a></li>
            <li><a href="#usage">Usage</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#api">API Reference</a></li>
        </ul>
    </nav>

    <div class="container">
        <section id="overview" class="section">
            <h2>Overview</h2>
            <p>
                A Vite plugin that renames build output files using Content Identifiers (CID). 
                This ensures that file names are deterministic based on their content, making them 
                perfect for deployment to IPFS, Arweave, or other content-addressed storage systems.
            </p>
            <p>
                Built with Deno and published to JSR for modern JavaScript environments.
            </p>
        </section>

        <section id="installation" class="section">
            <h2>Installation</h2>
            
            <h3>Using JSR (Recommended)</h3>
            <div class="code-block">// With Deno
import { cidVitePlugin } from "jsr:@fusionstrings/cid-vite-plugin";

// With npm
npx jsr add @fusionstrings/cid-vite-plugin

// With pnpm
pnpm dlx jsr add @fusionstrings/cid-vite-plugin

// With yarn
yarn dlx jsr add @fusionstrings/cid-vite-plugin</div>
        </section>

        <section id="usage" class="section">
            <h2>Usage</h2>
            
            <h3>Basic Setup</h3>
            <p>Add the plugin to your <span class="inline-code">vite.config.ts</span>:</p>
            <div class="code-block">import { defineConfig } from 'vite';
import { cidVitePlugin } from '@fusionstrings/cid-vite-plugin';

export default defineConfig({
  plugins: [
    cidVitePlugin(),
  ],
});</div>

            <h3>Build Your Project</h3>
            <div class="code-block">vite build</div>

            <p>All your assets (JS, CSS, images, etc.) will be renamed with CID-based filenames:</p>
            <div class="code-block">dist/
  index.html
  assets/
    bafkreifzjut3te2nhyekklss27nh3k72ysco7y32koao5eei66wof36n5e.js
    bafkreievhnuqrwvqocnirkgt5wp2uwyg3fdq3i54uaqeptzxtoyy76uijy.css
    bafkreicdwt3ocjgrqc3nxzvitlterbgeem3hrpaudujvil3hkwhdcbcupm.png</div>
        </section>

        <section id="features" class="section">
            <h2>Features</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="icon">üîí</div>
                    <h3>Content Addressed</h3>
                    <p>Files are named by their content hash (CID), ensuring true immutability and verifiability.</p>
                </div>
                
                <div class="feature-card">
                    <div class="icon">‚ö°Ô∏è</div>
                    <h3>Vite Powered</h3>
                    <p>Seamless integration with Vite's build pipeline. Works with all Vite features.</p>
                </div>
                
                <div class="feature-card">
                    <div class="icon">üì¶</div>
                    <h3>IPFS Ready</h3>
                    <p>Perfect for deploying to IPFS, Arweave, or any content-addressed storage system.</p>
                </div>
                
                <div class="feature-card">
                    <div class="icon">üîÑ</div>
                    <h3>Auto Updates</h3>
                    <p>Automatically updates all references in JS, CSS, HTML, and manifest files.</p>
                </div>
                
                <div class="feature-card">
                    <div class="icon">üóÇÔ∏è</div>
                    <h3>MPA Support</h3>
                    <p>Preserves HTML entry points for Multi-Page Application setups.</p>
                </div>
                
                <div class="feature-card">
                    <div class="icon">üó∫Ô∏è</div>
                    <h3>Source Maps</h3>
                    <p>Properly handles and updates source map references with CID filenames.</p>
                </div>
            </div>

            <h3>Key Capabilities</h3>
            <ul>
                <li>Renames all build assets with CID-based filenames using SHA-256 and base32 encoding</li>
                <li>Updates all references in JavaScript, CSS, HTML, and manifest files</li>
                <li>Processes files in topological order to handle dependencies correctly</li>
                <li>Preserves HTML entry points for web server compatibility</li>
                <li>Updates source map references automatically</li>
                <li>Works with code splitting and dynamic imports</li>
                <li>Compatible with Vite's manifest generation</li>
            </ul>
        </section>

        <section id="api" class="section">
            <h2>API Reference</h2>
            
            <h3>cidVitePlugin()</h3>
            <p>
                Creates a Vite plugin instance that renames build output files using Content Identifiers.
                The plugin integrates with Vite's build process to rename all generated assets with 
                content-addressed CID hashes.
            </p>
            
            <p><span class="badge">Returns</span> <span class="inline-code">Plugin</span></p>
            
            <h3>generateCID(content)</h3>
            <p>
                Generates a Content Identifier (CID) for the given content using CIDv1 with 
                SHA-256 hashing and base32 encoding, compatible with IPFS and other content-addressed 
                storage systems.
            </p>
            
            <p><span class="badge">Parameters</span></p>
            <ul>
                <li><span class="inline-code">content</span> - The content to hash (string or Uint8Array)</li>
            </ul>
            
            <p><span class="badge">Returns</span> <span class="inline-code">Promise&lt;string&gt;</span> - The CID string (e.g., "bafkrei...")</p>

            <a href="./html/index.html" class="api-link">View Full API Documentation ‚Üí</a>
        </section>

        <section id="development" class="section">
            <h2>Development</h2>
            
            <h3>Local Setup</h3>
            <div class="code-block"># Clone the repository
git clone https://github.com/fusionstrings/cid-vite-plugin
cd cid-vite-plugin

# Run tests
deno task test

# Check types
deno task check

# Format code
deno task fmt

# Build playground
deno task build

# Generate docs
deno task docs</div>

            <h3>Running Tests</h3>
            <p>The project uses Deno's built-in test runner with comprehensive test coverage:</p>
            <div class="code-block">deno task test</div>
            
            <p>Tests include:</p>
            <ul>
                <li>Basic CID generation verification</li>
                <li>Single and multi-chunk builds</li>
                <li>CSS with url() references</li>
                <li>Source map handling</li>
                <li>Multi-Page Application (MPA) support</li>
                <li>Edge cases (empty files, duplicate content)</li>
            </ul>
        </section>

        <section id="deployment" class="section">
            <h2>Deployment to IPFS</h2>
            
            <p>After building your project with the CID plugin, deploy to IPFS:</p>
            
            <h3>Using IPFS CLI</h3>
            <div class="code-block"># Build your project
vite build

# Add the dist folder to IPFS
ipfs add -r dist

# The CID of the root folder is your deployment hash</div>

            <h3>Using Fleek</h3>
            <div class="code-block"># Install Fleek CLI
npm install -g @fleek-platform/cli

# Deploy
fleek sites deploy</div>

            <h3>Benefits of CID-Based Filenames</h3>
            <ul>
                <li><strong>Immutable deployments</strong> - Files never change, perfect for versioning</li>
                <li><strong>Deduplication</strong> - Identical files share the same CID across deployments</li>
                <li><strong>Cache optimization</strong> - Files can be cached forever since CID changes with content</li>
                <li><strong>Verification</strong> - Users can verify content integrity by checking CIDs</li>
                <li><strong>Distributed hosting</strong> - Files can be retrieved from any IPFS node</li>
            </ul>
        </section>
    </div>

    <footer class="footer">
        <p>Built with ‚ù§Ô∏è by <a href="https://github.com/fusionstrings" target="_blank">@fusionstrings</a></p>
        <p><a href="https://github.com/fusionstrings/cid-vite-plugin" target="_blank">GitHub</a> | 
           <a href="https://jsr.io/@fusionstrings/cid-vite-plugin" target="_blank">JSR</a> | 
           <a href="./html/index.html">API Docs</a></p>
    </footer>
</body>
</html>
